(function(t){function s(s){for(var o,a,i=s[0],c=s[1],u=s[2],l=0,m=[];l<i.length;l++)a=i[l],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&m.push(n[a][0]),n[a]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);p&&p(s);while(m.length)m.shift()();return r.push.apply(r,u||[]),e()}function e(){for(var t,s=0;s<r.length;s++){for(var e=r[s],o=!0,i=1;i<e.length;i++){var c=e[i];0!==n[c]&&(o=!1)}o&&(r.splice(s--,1),t=a(a.s=e[0]))}return t}var o={},n={app:0},r=[];function a(s){if(o[s])return o[s].exports;var e=o[s]={i:s,l:!1,exports:{}};return t[s].call(e.exports,e,e.exports,a),e.l=!0,e.exports}a.m=t,a.c=o,a.d=function(t,s,e){a.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:e})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,s){if(1&s&&(t=a(t)),8&s)return t;if(4&s&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(a.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&s&&"string"!=typeof t)for(var o in t)a.d(e,o,function(s){return t[s]}.bind(null,o));return e},a.n=function(t){var s=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(s,"a",s),s},a.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},a.p="/medline-test/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=s,i=i.slice();for(var u=0;u<i.length;u++)s(i[u]);var p=c;r.push([0,"chunk-vendors"]),e()})({0:function(t,s,e){t.exports=e("56d7")},4960:function(t,s,e){"use strict";var o=e("cb86"),n=e.n(o);n.a},"56d7":function(t,s,e){"use strict";e.r(s);e("e260"),e("e6cf"),e("cca6"),e("a79d");var o=e("2b0e"),n=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"app"},[e("div",{staticClass:"app-header"},[e("div",{staticClass:"app-header-block"},[e("h1",{staticClass:"app-header-block-logo"},[t._v("LOGO")]),e("PostsCounter")],1),"post"===t.slot?e("p",{staticClass:"app-header-link",on:{click:t.openTasksList}},[e("router-link",{attrs:{to:"/posts"}},[t._v("Вернуться к списку статей")])],1):t._e()]),e("div",{staticClass:"app-sidebar"},[e("RandomPost",{attrs:{posts:t.posts},on:{"post-is-selected":t.postIsSelected}}),e("LastComment",{attrs:{"random-comments":t.randomComments},on:{"post-is-selected":t.postIsSelected}}),e("RandomPost",{attrs:{posts:t.posts},on:{"post-is-selected":t.postIsSelected}})],1),e("div",{staticClass:"app-content"},["posts"===t.slot?e("Posts",{attrs:{posts:t.posts,comments:t.comments},on:{"post-is-selected":t.postIsSelected}}):e("CurrentPost",{attrs:{"selected-post":t.selectedPost,"previous-post":t.previousPost,"next-post":t.nextPost},on:{"post-is-selected":t.postIsSelected}})],1)])},r=[],a=(e("7db0"),e("c740"),e("a9e3"),function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"posts_counter"},[t._v(" В нашем блоге уже "+t._s(t.postsCounter)+" "+t._s(t.pluralizePosts(t.postsCounter))+" ")])}),i=[];function c(t,s){var e=[2,0,1,1,1,2];return s[t%100>4&&t%100<20?2:e[Math.min(t%10,5)]]}var u={name:"posts-counter",computed:{postsCounter:function(){return this.$store.getters["posts/postsCounter"]}},methods:{pluralizePosts:function(t){return c(t,["статья","статьи","статей"])}}},p=u,l=e("2877"),m=Object(l["a"])(p,a,i,!1,null,null,null),d=m.exports,f=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"random_post -card",on:{click:t.openPost}},[e("router-link",{staticClass:"random_post-link",attrs:{to:"/posts/"+t.randomPost.id}},[e("h2",{staticClass:"random_post-link-header"},[t._v("Случайная статья")]),e("h1",{staticClass:"random_post-link-title"},[t._v(t._s(t.randomPost?t.randomPost.title:"Заголовок"))]),e("p",{staticClass:"random_post-link-description",attrs:{type:"text",maxlength:"60"}},[t._v(t._s(t.randomPost?t.randomPost.body:"Описание"))])])],1)},h=[],_={name:"random-post",props:{posts:Array},data:function(){return{randomId:null,randomPost:{}}},watch:{postsCounter:function(t){this.randomId=Math.floor(Math.random()*(t-1)+1)},posts:function(t){var s=this;this.randomPost=t.find((function(t){return t.id===s.randomId}))}},computed:{postsCounter:function(){return this.$store.getters["posts/postsCounter"]}},methods:{openPost:function(){this.$emit("post-is-selected",this.randomPost)}}},v=_,C=Object(l["a"])(v,f,h,!1,null,null,null),P=C.exports,b=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"last_comment -card"},[e("h2",{staticClass:"last_comment-header"},[t._v("Последний комментарий")]),t._l(t.randomComments,(function(s,o){return e("div",{key:o,staticClass:"last_comment-body",on:{click:function(e){return t.openPost(s.postId)}}},[e("router-link",{staticClass:"last_comment-body-link",attrs:{to:"/posts/"+s.postId}},[e("h1",{staticClass:"last_comment-body-link-title"},[t._v(t._s(s?s.name:"Автор"))]),e("p",{staticClass:"last_comment-body-link-description"},[t._v(t._s(s?s.body:"Комментарий"))])])],1)}))],2)},g=[],S={name:"last-comment",props:{randomComments:Array},methods:{openPost:function(t){this.$emit("post-is-selected",t)}}},y=S,k=Object(l["a"])(y,b,g,!1,null,null,null),x=k.exports,T=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"current_post"},[e("div",{staticClass:"current_post-body -card"},[e("h1",{staticClass:"current_post-body-title"},[t._v(t._s(t.selectedPost?t.selectedPost.title:"Заголовок"))]),e("p",{staticClass:"current_post-body-description",attrs:{type:"text",maxlength:"60"}},[t._v(t._s(t.selectedPost?t.selectedPost.body:"Описание"))])]),e("div",{staticClass:"current_post-comments -card"},[e("h2",{staticClass:"current_post-comments-header"},[t._v("Комментарии")]),t._l(t.comments,(function(s,o){return e("div",{key:o,staticClass:"current_post-comments-comment -card"},[e("h3",{staticClass:"current_post-comments-comment-author"},[t._v(t._s(s.name))]),e("p",{staticClass:"current_post-comments-comment-description"},[t._v(t._s(s.body))])])}))],2),e("div",{staticClass:"current_post-pagination -card"},[e("p",{staticClass:"current_post-pagination-link",on:{click:function(s){return t.openPost(t.previousPost)}}},[e("router-link",{class:t.previousPost?"":"-disabled",attrs:{to:"/posts/"+(t.previousPost?t.previousPost.id:1)}},[t._v(t._s(t.previousPost?t.previousPost.title:"Предыдущая статья"))])],1),e("p",{staticClass:"current_post-pagination-link",on:{click:function(s){return t.openPost(t.nextPost)}}},[e("router-link",{class:t.nextPost?"":"-disabled",attrs:{to:"/posts/"+(t.nextPost?t.nextPost.id:1)}},[t._v(t._s(t.nextPost?t.nextPost.title:"Следующая статья"))])],1)])])},O=[],w={name:"current-post",props:{selectedPost:Object,previousPost:[Object,null],nextPost:[Object,null]},computed:{comments:function(){return this.$store.getters["comments/commentsByPostId"](this.selectedPost.id)}},methods:{openPost:function(t){t&&this.$emit("post-is-selected",t)}}},$=w,j=Object(l["a"])($,T,O,!1,null,null,null),A=j.exports,E=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"posts"},[e("div",{staticClass:"posts-posts_field"},t._l(t.selectedPosts[t.currentPage-1],(function(s,o){return e("div",{key:o,staticClass:"posts-posts_field-post -card",on:{click:function(e){return t.openPost(s)}}},[e("router-link",{staticClass:"posts-posts_field-post-link",attrs:{to:"/posts/"+s.id}},[e("h2",{staticClass:"posts-posts_field-post-link-title"},[t._v(t._s(s.title))]),e("p",{staticClass:"posts-posts_field-post-link-description"},[t._v(t._s(s.body))]),e("div",{staticClass:"posts-posts_field-post-link-comments"},[t._v(t._s(t.currentCommentsCounter(s.id))+" "+t._s(t.pluralizeComments(t.currentCommentsCounter(s.id)))+" ")])])],1)})),0),e("div",{staticClass:"posts-pagination_field -card"},[e("b-pagination",{staticClass:"posts-pagination_field-pagination",attrs:{align:"left","total-rows":t.posts.length,"per-page":t.perPage},model:{value:t.currentPage,callback:function(s){t.currentPage=s},expression:"currentPage"}})],1)])},I=[],M=(e("4de4"),e("fb6a"),{name:"posts",props:{posts:Array,comments:Array},data:function(){return{currentPage:1,perPage:5,currentComments:[]}},computed:{selectedPosts:function(){for(var t=this.posts,s=this.perPage,e=[],o=0;o<Math.ceil(t.length/s);o++)e[o]=t.slice(o*s,o*s+s);return e}},methods:{currentCommentsCounter:function(t){return this.comments.filter((function(s){return s.postId===t})).length},pluralizeComments:function(t){return c(t,["комментарий","комментария","комментариев"])},openPost:function(t){this.$route.params.id&&this.$emit("post-is-selected",t)}}}),R=M,U=Object(l["a"])(R,E,I,!1,null,null,null),L=U.exports,z={name:"App",components:{PostsCounter:d,RandomPost:P,LastComment:x,CurrentPost:A,Posts:L},data:function(){return{slot:"posts",selectedPost:{},previousPost:{},nextPost:{},numberOfComments:5,randomComments:[]}},created:function(){this.$store.dispatch("posts/fetchPosts"),this.$store.dispatch("comments/fetchComments")},watch:{posts:function(){this.$route.params.id&&this.postIsSelected(Number(this.$route.params.id))},comments:function(){this.getRandomComments()}},computed:{posts:function(){return this.$store.state.posts.posts},comments:function(){return this.$store.state.comments.comments},postsCounter:function(){return this.$store.getters["posts/postsCounter"]},commentsCounter:function(){return this.$store.getters["comments/commentsCounter"]}},methods:{postIsSelected:function(t){var s;this.slot="post","number"===typeof t?(this.selectedPost=this.posts.find((function(s){return s.id===t})),s=this.posts.findIndex((function(s){return s.id===t}))):(this.selectedPost=t,s=this.posts.findIndex((function(s){return s.id===t.id}))),this.previousPost=0===s?null:this.posts[s-1],s===this.postsCounter-1?this.nextPost=null:this.nextPost=this.posts[s+1]},generateRandomId:function(t,s){return Math.floor(Math.random()*(s-t)+t)},getRandomComments:function(){while(this.numberOfComments>0)this.randomComments.push(this.comments[this.generateRandomId(this.commentsCounter,1)]),this.numberOfComments--},openTasksList:function(){this.slot="posts"}}},V=z,N=(e("4960"),Object(l["a"])(V,n,r,!1,null,null,null)),B=N.exports,J=e("5f5b"),G=e("9ebe"),q=e("bc3a"),D=e.n(q),F=(e("99af"),"https://dev.eu39.ru/"),H="",K="".concat(F).concat(H?":".concat(H):""),Q={hostApi:F,portApi:H,baseURLApi:K},W=e("2f62"),X=(e("96cf"),e("1da1")),Y={namespaced:!0,state:{posts:[],ststus:""},getters:{postsCounter:function(t){return t.posts.length}},mutations:{SET_STATUS:function(t,s){t.status=s},SAVE_POSTS:function(t,s){t.posts=s}},actions:{fetchPosts:function(t){return Object(X["a"])(regeneratorRuntime.mark((function s(){var e,o,n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e=t.commit,e("SET_STATUS","fetching"),s.prev=2,s.next=5,D.a.get("/posts");case 5:o=s.sent,n=o.data,e("SAVE_POSTS",n),e("SET_STATUS","posts-is-fetched"),s.next=14;break;case 11:s.prev=11,s.t0=s["catch"](2),e("SET_STATUS","error");case 14:case"end":return s.stop()}}),s,null,[[2,11]])})))()}}},Z={namespaced:!0,state:{comments:[],status:""},getters:{commentsCounter:function(t){return t.comments.length},commentsByPostId:function(t){return function(s){return t.comments.filter((function(t){return t.postId===s}))}}},mutations:{SET_STATUS:function(t,s){t.status=s},SAVE_COMMENTS:function(t,s){t.comments=s}},actions:{fetchComments:function(t){return Object(X["a"])(regeneratorRuntime.mark((function s(){var e,o,n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e=t.commit,e("SET_STATUS","fetching"),s.prev=2,s.next=5,D.a.get("/comments");case 5:o=s.sent,n=o.data,e("SAVE_COMMENTS",n),e("SET_STATUS","comments-is-fetched"),s.next=14;break;case 11:s.prev=11,s.t0=s["catch"](2),e("SET_STATUS","error");case 14:case"end":return s.stop()}}),s,null,[[2,11]])})))()}}};o["default"].use(W["a"]);var tt=new W["a"].Store({modules:{posts:Y,comments:Z}}),st=e("8c4f");o["default"].use(st["a"]);var et=new st["a"]({routes:[{path:"/",redirect:"/posts"},{path:"/posts",name:"Posts",component:L},{path:"/posts/:id",name:"CurrentPost",component:A}]});o["default"].config.productionTip=!1,D.a.defaults.baseURL=Q.baseURLApi,D.a.defaults.headers.common["Content-Type"]="application/json",o["default"].use(J["a"]),o["default"].use(G["ClientTable"],{theme:"bootstrap4"}),new o["default"]({el:"#app",store:tt,router:et,render:function(t){return t(B)}})},cb86:function(t,s,e){}});
//# sourceMappingURL=app.203c5821.js.map